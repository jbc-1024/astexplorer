"use strict";function _createForOfIteratorHelper(r,t){var e,n,o="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!o){if(Array.isArray(r)||(o=_unsupportedIterableToArray(r))||t&&r&&"number"==typeof r.length)return o&&(r=o),e=0,{s:t=function(){},n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:(n=function(r){throw r},i.toString=function(){return n.toString()},i),f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(r){return n.apply(this,arguments)}var a,u,l=!0,f=!1;return{s:function(){o=o.call(r)},n:function(){var r=o.next();return l=r.done,r},e:(u=function(r){f=!0,a=r},c.toString=function(){return u.toString()},c),f:function(){try{l||null==o.return||o.return()}finally{if(f)throw a}}};function c(r){return u.apply(this,arguments)}}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Map"===(e="Object"===e&&r.constructor?r.constructor.name:e)||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var _globalEditor=null,globalEditorGet=function(){return _globalEditor},globalEditorSet=function(r){_globalEditor=r},setupEditor=function(){var r=e("#editor"),n=CodeMirror(r,{lineNumbers:!0,indentUnit:4,styleActiveLine:!0,matchBrackets:!0,lineWrapping:!0});globalEditorSet(n),n.on("cursorActivity",function(r){var t,e;"tree"==activeModeName()&&(t=(e=n.getCursor()).line+1,e=e.ch+1,highlightNode([t,e]))}),n.on("change",function(r){refresh()}),setNewLang("CSS")},highlightNode=function(r){var t=globalAstGet(),r=astHasCursor(t,r)[1],t=tagTree(t,[],r,!0);e("#tree").innerHTML=t},contains=function r(t,e){if(null==e)return!1;if(isDict(t)){if(t===e)return!0;for(var n=0,o=Object.keys(t);n<o.length;n++)if(r(t[o[n]],e))return!0;return!1}if(isArray(t)){if(t===e)return!0;var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;)if(r(i.value,e))return!0}catch(r){a.e(r)}finally{a.f()}return!1}return t===e},astHasCursor=function r(t,e){if(isDict(t)){if(!isNode(t))return[!1,null];if(!cursorInNode(t,e))return[!1,null];for(var n=0,o=Object.keys(t);n<o.length;n++)if((a=r(t[o[n]],e))[0])return a;return[!0,t]}if(isArray(t)){var i,a,u=_createForOfIteratorHelper(t);try{for(u.s();!(i=u.n()).done;)if((a=r(i.value,e))[0])return a}catch(r){u.e(r)}finally{u.f()}}return[!1,null]},cursorInNode=function(r,t){var e=t[0],t=t[1],n=r.loc.start,r=r.loc.end,o=!1,n=((e>n.line||e==n.line&&t>=n.column)&&(o=!0),!1);return(e<r.line||e==r.line&&t<=r.column)&&(n=!0),o&&n},preventDefaultSave=function(){document.addEventListener("keydown",function(r){var t=r.metaKey,e="s"===r.key;t&&e&&r.preventDefault()})};
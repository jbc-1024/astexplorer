"use strict";function _createForOfIteratorHelper(t,n){var e,r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||n&&t&&"number"==typeof t.length)return r&&(t=r),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var HtmlTree=function(){function k(t,n,e){return t.substr(e||0,n.length)===n}function s(t){return"number"==typeof t&&isNaN(t)}function x(t,n,e){var r=t.length;if(0!==r)for(var e=0|e,o=s(n),i=0<=e?e:r+e;i<r;){var a=t[i++];if(a===n)return!0;if(o&&s(a))return!0}return!1}function A(t,n,e){for(var r=t.index,o=t.index=r+e,i=r;i<o;i++)"\n"===n.charAt(i)?(t.line++,t.column=0):t.column++}function T(t,n,e){A(t,n,e-t.index)}function L(t){return{index:t.index,line:t.line,column:t.column}}function r(t,n){for(var t={str:t,options:n,position:{index:0,column:0,line:0},tokens:[]},e=t,r=e.str,o=e.options.childlessTags,i=r.length;e.position.index<i;){var a,s=e.position.index;f(e),e.position.index===s&&(k(r,"!--",s+1)?function(t){var n=t.str,e=t.position,r=L(e),o=(A(e,n,4),n.indexOf("--\x3e",e.index)),i=o+3;-1===o&&(o=i=n.length);o=n.slice(e.index,o);T(e,n,i),t.tokens.push({type:"comment",content:o,position:{start:r,end:L(e)}})}(e):(s=p(e),a=s.toLowerCase(),x(o,a)&&function(t,n){var e=n.str,r=n.position,o=n.tokens,i=t.toLowerCase(),a=e.length,s=r.index;for(;s<a;){var l=e.indexOf("</",s);if(-1===l){f(n);break}var c=L(r),c=(T(c,e,l),{str:e,position:c,tokens:[]}),u=p(c);if(i===u.toLowerCase()){l!==r.index&&(u=L(r),T(r,e,l),o.push({type:"text",content:e.slice(u.index,l),position:{start:u,end:L(r)}})),d.apply(o,c.tokens),T(r,e,c.position.index);break}s=c.position.index}}(s,e)))}return t.tokens}var a=/[A-Za-z0-9]/;function f(t){var n,e,r=t.str,o=t.position,i=function(t,n){for(;;){var e=t.indexOf("<",n);if(-1===e)return e;var r=t.charAt(e+1);if("/"===r||"!"===r||a.test(r))return e;n=e+1}}(r,o.index);i!==o.index&&(-1===i&&(i=r.length),n=L(o),e=r.slice(o.index,i),T(o,r,i),r=L(o),t.tokens.push({type:"text",content:e,position:{start:n,end:r}}))}function p(t){for(var n=t.str,e=t.position,r="/"===n.charAt(e.index+1),o=L(e),r=(A(e,n,r?2:1),t.tokens.push({type:"tag-start",close:r,position:{start:o}}),function(t){var n=t.str,e=t.position,r=n.length,o=e.index;for(;o<r;){var i=n.charAt(o);if(!(O(i)||"/"===i||">"===i))break;o++}var a=o+1;for(;a<r;){var s=n.charAt(a);if(!!(O(s)||"/"===s||">"===s))break;a++}T(e,n,a);e=n.slice(o,a);return t.tokens.push({type:"tag",content:e}),e}(t)),o=t,i=o.str,a=o.position,s=o.tokens,l=a.index,c=null,u=l,f=[],p=i.length;l<p;){var d=i.charAt(l);if(c)d===c&&(c=null),l++;else{if("/"===d||">"===d){l!==u&&f.push(i.slice(u,l));break}O(d)?(l!==u&&f.push(i.slice(u,l)),u=l+1):"'"!==d&&'"'!==d||(c=d),l++}}T(a,i,l);for(var h=f.length,v="attribute",g=0;g<h;g++){var y,m=f[g];if(-1===m.indexOf("=")){var b=f[g+1];if(b&&k(b,"=")){if(1<b.length){var b=m+b;s.push({type:v,content:b}),g+=1;continue}b=f[g+2];if(g+=1,b){b=m+"="+b;s.push({type:v,content:b}),g+=1;continue}}}(function(t,n,e){return e=(e||t.length)-n.length,-1!==(t=t.lastIndexOf(n,e))&&t===e})(m,"=")?(b=f[g+1])&&!function(t,n,e){return-1!==t.indexOf(n,e||0)}(b,"=")?(y=m+b,s.push({type:v,content:y}),g+=1):(y=m.slice(0,-1),s.push({type:v,content:y})):s.push({type:v,content:m})}o="/"===n.charAt(e.index),A(e,n,o?2:1),a=L(e);return t.tokens.push({type:"tag-end",close:o,position:{end:a}}),r}var n=/\s/;function O(t){return n.test(t)}var d=[].push;function o(t,n){var e={tagName:null,children:[]};return function t(n){var e=n.tokens,r=n.options;var o=n.stack;var i=o[o.length-1].children;var a=e.length;var s=n.cursor;for(;s<a;){var l=e[s];if("tag-start"!==l.type)i.push(l),s++;else{var c=e[++s],u=(s++,c.content.toLowerCase());if(l.close){for(var f=o.length,p=!1;-1<--f;)if(o[f].tagName===u){p=!0;break}for(;s<a;){var d=e[s];if("tag-end"!==d.type)break;s++}if(p){N(o,f,l.position.start,e[s-1].position.end);break}}else{var h=x(r.closingTags,u);if(h&&(b=r.closingTagAncestorBreakers,h=!w(u,o,b)),h)for(var v=o.length-1;0<v;){if(u===o[v].tagName){N(o,v,l.position.start,l.position.start);var g=v-1;i=o[g].children;break}v-=1}for(var y=[],m=void 0;s<a&&"tag-end"!==(m=e[s]).type;)y.push(m.content),s++;s++;var b=[],h={start:l.position.start,end:m.position.end},c={type:"element",tagName:c.content,attributes:y,children:b,position:h},k=(i.push(c),!(m.close||x(r.voidTags,u)));k&&(k=o.push({tagName:u,children:b,position:h}),t(h={tokens:e,options:r,cursor:s,stack:o}),s=h.cursor,o.length===k&&(c.position.end=e[s-1].position.end))}}}n.cursor=s}({tokens:t,options:n,cursor:0,stack:[e]}),e.children}function w(t,n,e){var r=e[t];if(r)for(var o=n.length-1;0<=o;){var i=n[o].tagName;if(i===t)break;if(x(r,i))return!0;o--}return!1}function N(t,n,e,r){t[n].position.end=r;for(var o=n+1,i=t.length;o<i;o++)t[o].position.end=e;t.splice(n)}function i(t,e){return t.map(function(t){var n=t.type,n="element"===n?{type:n,tagName:t.tagName.toLowerCase(),attributes:t.attributes.map(function(t){t=t.trim(),e="=";var n,e,t=-1===(n=t.indexOf(e))?[t]:[t.slice(0,n),t.slice(n+e.length)];return{key:t[0],value:"string"==typeof t[1]?(e=(n=t[1]).charAt(0),t=n.length-1,'"'!==e&&"'"!==e||e!==n.charAt(t)?n:n.slice(1,t)):null}}),children:i(t.children,e)}:{type:n,content:t.content};return e.includePositions&&(n.loc=t.position),n})}var l={voidTags:["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],closingTags:["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"],childlessTags:["style","script","template"],closingTagAncestorBreakers:{li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]},includePositions:!0};this.parse=function(t){var n,t=function(t,n){return i(o(r(t,n=1<arguments.length&&void 0!==n?n:l),n),n)}(t),e={type:"program",loc:{start:{index:0,line:0,column:0},end:{index:0,line:0,column:0}},children:t};return 0!==t.length&&(n=t[0],t=t[t.length-1],e.loc.start=n.loc.start,e.loc.end=t.loc.end),this.normalizeLoc(e)},this.normalizeLoc=function(t){if(null===t)return null;if(isNode(t)){for(var n={},e=0,r=Object.keys(t);e<r.length;e++){var o,i,a=r[e];"start"!=a&&"end"!=a&&("loc"==a?(o={line:t.loc.start.line+1,column:t.loc.start.column+1},i={line:t.loc.end.line+1,column:t.loc.end.column+1},n.loc={start:o,end:i}):n[a]=this.normalizeLoc(t[a]))}return n}if(isDict(t)){for(var s={},l=0,c=Object.keys(t);l<c.length;l++){var u=c[l],f=t[u];s[u]=this.normalizeLoc(f)}return s}if(isArray(t)){var p,d=[],h=_createForOfIteratorHelper(t);try{for(h.s();!(p=h.n()).done;){var v=p.value,g=this.normalizeLoc(v);d.push(g)}}catch(t){h.e(t)}finally{h.f()}return d}return t}},parseWithHtmlTree=function(t){return(new HtmlTree).parse(t)};
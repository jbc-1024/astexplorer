"use strict";function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var HtmlTree=function(){function H(t,e,n){return t.substr(n||0,e.length)===e}function l(t){return"number"==typeof t&&isNaN(t)}function I(t,e,n){var r=t.length;if(0===r)return!1;for(var o=0|n,i=l(e),a=0<=o?o:r+o;a<r;){var s=t[a++];if(s===e)return!0;if(i&&l(s))return!0}return!1}function c(t,e,n){for(var r=t.index,o=t.index=r+n,i=r;i<o;i++){"\n"===e.charAt(i)?(t.line++,t.column=0):t.column++}}function S(t,e,n){return c(t,e,n-t.index)}function p(t){return{index:t.index,line:t.line,column:t.column}}function i(t,e){var n={str:t,options:e,position:{index:0,column:0,line:0},tokens:[]};return function(t){var e=t.str,n=t.options.childlessTags,r=e.length;for(;t.position.index<r;){var o=t.position.index;if(v(t),t.position.index===o){var i=H(e,"!--",o+1);if(i)u(t);else{var a=d(t),s=a.toLowerCase();I(n,s)&&f(a,t)}}}}(n),n.tokens}var s=/[A-Za-z0-9]/;function v(t){var e=t.str,n=t.position,r=function(t,e){for(;;){var n=t.indexOf("<",e);if(-1===n)return n;var r=t.charAt(n+1);if("/"===r||"!"===r||s.test(r))return n;e=n+1}}(e,n.index);if(r!==n.index){-1===r&&(r=e.length);var o=p(n),i=e.slice(n.index,r);S(n,e,r);var a=p(n);t.tokens.push({type:"text",content:i,position:{start:o,end:a}})}}function u(t){var e=t.str,n=t.position,r=p(n);c(n,e,4);var o=e.indexOf("--\x3e",n.index),i=o+3;-1===o&&(o=i=e.length);var a=e.slice(n.index,o);S(n,e,i),t.tokens.push({type:"comment",content:a,position:{start:r,end:p(n)}})}function d(t){var e=t.str,n=t.position,r="/"===e.charAt(n.index+1),o=p(n);c(n,e,r?2:1),t.tokens.push({type:"tag-start",close:r,position:{start:o}});var i=function(t){var e=t.str,n=t.position,r=e.length,o=n.index;for(;o<r;){var i=e.charAt(o),a=!(B(i)||"/"===i||">"===i);if(a)break;o++}var s=o+1;for(;s<r;){var l=e.charAt(s),c=!(B(l)||"/"===l||">"===l);if(!c)break;s++}S(n,e,s);var u=e.slice(o,s);return t.tokens.push({type:"tag",content:u}),u}(t);!function(t){var e=t.str,n=t.position,r=t.tokens,o=n.index,i=null,a=o,s=[],l=e.length;for(;o<l;){var c=e.charAt(o);if(i){var u=c===i;u&&(i=null),o++}else{var f="/"===c||">"===c;if(f){o!==a&&s.push(e.slice(a,o));break}var p=B(c);if(p)o!==a&&s.push(e.slice(a,o)),a=o+1,o++;else{var v="'"===c||'"'===c;v&&(i=c),o++}}}S(n,e,o);for(var d=s.length,h="attribute",g=0;g<d;g++){var y=s[g],m=-1===y.indexOf("=");if(m){var b=s[g+1];if(b&&H(b,"=")){if(1<b.length){var k=y+b;r.push({type:h,content:k}),g+=1;continue}var x=s[g+2];if(g+=1,x){var A=y+"="+x;r.push({type:h,content:A}),g+=1;continue}}}if(I=y,_="=",z=void 0,C=(z||I.length)-_.length,-1===(j=I.lastIndexOf(_,C))||j!==C)r.push({type:h,content:y});else{var T=s[g+1];if(T&&(w="=",N=void 0,-1===T.indexOf(w,N||0))){var L=y+T;r.push({type:h,content:L}),g+=1;continue}var O=y.slice(0,-1);r.push({type:h,content:O})}}var w,N;var I,_,z,C,j}(t);var a="/"===e.charAt(n.index);c(n,e,a?2:1);var s=p(n);return t.tokens.push({type:"tag-end",close:a,position:{end:s}}),i}var e=/\s/;function B(t){return e.test(t)}var h=[].push;function f(t,e){for(var n=e.str,r=e.position,o=e.tokens,i=t.toLowerCase(),a=n.length,s=r.index;s<a;){var l=n.indexOf("</",s);if(-1===l){v(e);break}var c=p(r);S(c,n,l);var u={str:n,position:c,tokens:[]};if(i===d(u).toLowerCase()){if(l!==r.index){var f=p(r);S(r,n,l),o.push({type:"text",content:n.slice(f.index,l),position:{start:f,end:p(r)}})}h.apply(o,u.tokens),S(r,n,u.position.index);break}s=u.position.index}}function a(t,e){var n={tagName:null,children:[]};return function t(e){var n=e.tokens,r=e.options;var o=e.stack;var i=o[o.length-1].children;var a=n.length;var s=e.cursor;for(;s<a;){var l=n[s];if("tag-start"===l.type){var c=n[++s];s++;var u=c.content.toLowerCase();if(l.close){for(var f=o.length,p=!1;-1<--f;)if(o[f].tagName===u){p=!0;break}for(;s<a;){var v=n[s];if("tag-end"!==v.type)break;s++}if(p){z(o,f,l.position.start,n[s-1].position.end);break}}else{var d=I(r.closingTags,u),h=d;if(h){var g=r.closingTagAncestorBreakers;h=!_(u,o,g)}if(h)for(var y=o.length-1;0<y;){if(u===o[y].tagName){z(o,y,l.position.start,l.position.start);var m=y-1;i=o[m].children;break}y-=1}for(var b=[],k=void 0;s<a&&"tag-end"!==(k=n[s]).type;)b.push(k.content),s++;s++;var x=[],A={start:l.position.start,end:k.position.end},T={type:"element",tagName:c.content,attributes:b,children:x,position:A};i.push(T);var L=!(k.close||I(r.voidTags,u));if(L){var O=o.push({tagName:u,children:x,position:A}),w={tokens:n,options:r,cursor:s,stack:o};t(w),s=w.cursor;var N=o.length===O;N&&(T.position.end=n[s-1].position.end)}}}else i.push(l),s++}e.cursor=s}({tokens:t,options:e,cursor:0,stack:[n]}),n.children}function _(t,e,n){var r=n[t];if(r)for(var o=e.length-1;0<=o;){var i=e[o].tagName;if(i===t)break;if(I(r,i))return!0;o--}return!1}function z(t,e,n,r){t[e].position.end=r;for(var o=e+1,i=t.length;o<i;o++)t[o].position.end=n;t.splice(e)}function g(t,o){return t.map(function(t){var e,n=t.type,r="element"===n?{type:n,tagName:t.tagName.toLowerCase(),attributes:(e=t.attributes,e.map(function(t){var e,n,r,o,i,a,s=(e=t.trim(),n="=",-1===(r=e.indexOf(n))?[e]:[e.slice(0,r),e.slice(r+n.length)]),l=s[0],c="string"==typeof s[1]?(o=s[1],i=o.charAt(0),a=o.length-1,'"'!==i&&"'"!==i||i!==o.charAt(a)?o:o.slice(1,a)):null;return{key:l,value:c}})),children:g(t.children,o)}:{type:n,content:t.content};return o.includePositions&&(r.loc=t.position),r})}var y={voidTags:["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],closingTags:["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"],childlessTags:["style","script","template"],closingTagAncestorBreakers:{li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]},includePositions:!0};this.parse=function(t){var e=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:y;return g(a(i(t,e),e),e)}(t),n={type:"program",loc:{start:{index:0,line:0,column:0},end:{index:0,line:0,column:0}},children:e};if(0!==e.length){var r=e[0],o=e[e.length-1];n.loc.start=r.loc.start,n.loc.end=o.loc.end}return this.normalizeLoc(n)},this.normalizeLoc=function(t){if(null===t)return null;if(isNode(t)){for(var e={},n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if("start"!=o&&"end"!=o)if("loc"==o){var i={line:t.loc.start.line+1,column:t.loc.start.column+1},a={line:t.loc.end.line+1,column:t.loc.end.column+1};e.loc={start:i,end:a}}else e[o]=this.normalizeLoc(t[o])}return e}if(isDict(t)){for(var s={},l=0,c=Object.keys(t);l<c.length;l++){var u=c[l],f=t[u];s[u]=this.normalizeLoc(f)}return s}if(isArray(t)){var p,v=[],d=_createForOfIteratorHelper(t);try{for(d.s();!(p=d.n()).done;){var h=p.value,g=this.normalizeLoc(h);v.push(g)}}catch(t){d.e(t)}finally{d.f()}return v}return t}},parseWithHtmlTree=function(t){return(new HtmlTree).parse(t)};
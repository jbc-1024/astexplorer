"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(n){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)}(function(c){function r(r,i,n,f){n&&n.call?(l=n,n=null):l=a(r,n,"rangeFinder"),"number"==typeof i&&(i=c.Pos(i,0));var l,d=a(r,n,"minFoldSize");function o(n){var o=l(r,i);if(!o||o.to.line-o.from.line<d)return null;if("fold"!==f)for(var e=r.findMarksAt(o.from),t=0;t<e.length;++t)if(e[t].__isFold){if(!n)return null;o.cleared=!0,e[t].clear()}return o}var e,t,u=o(!0);if(a(r,n,"scanUp"))for(;!u&&i.line>r.firstLine();)i=c.Pos(i.line-1,0),u=o(!1);u&&!u.cleared&&"unfold"!==f&&(e=function(n,o,e){n=a(n,o,"widget");"function"==typeof n&&(n=n(e.from,e.to));"string"==typeof n?(o=document.createTextNode(n),(n=document.createElement("span")).appendChild(o),n.className="CodeMirror-foldmarker"):n=n&&n.cloneNode(!0);return n}(r,n,u),c.on(e,"mousedown",function(n){t.clear(),c.e_preventDefault(n)}),(t=r.markText(u.from,u.to,{replacedWith:e,clearOnEnter:a(r,n,"clearOnEnter"),__isFold:!0})).on("clear",function(n,o){c.signal(r,"unfold",r,n,o)}),c.signal(r,"fold",r,u.from,u.to))}c.newFoldFunction=function(e,t){return function(n,o){r(n,o,{rangeFinder:e,widget:t})}},c.defineExtension("foldCode",function(n,o,e){r(this,n,o,e)}),c.defineExtension("isFolded",function(n){for(var o=this.findMarksAt(n),e=0;e<o.length;++e)if(o[e].__isFold)return!0}),c.commands.toggleFold=function(n){n.foldCode(n.getCursor())},c.commands.fold=function(n){n.foldCode(n.getCursor(),null,"fold")},c.commands.unfold=function(n){n.foldCode(n.getCursor(),{scanUp:!1},"unfold")},c.commands.foldAll=function(e){e.operation(function(){for(var n=e.firstLine(),o=e.lastLine();n<=o;n++)e.foldCode(c.Pos(n,0),{scanUp:!1},"fold")})},c.commands.unfoldAll=function(e){e.operation(function(){for(var n=e.firstLine(),o=e.lastLine();n<=o;n++)e.foldCode(c.Pos(n,0),{scanUp:!1},"unfold")})},c.registerHelper("fold","combine",function(){var r=Array.prototype.slice.call(arguments,0);return function(n,o){for(var e=0;e<r.length;++e){var t=r[e](n,o);if(t)return t}}}),c.registerHelper("fold","auto",function(n,o){for(var e=n.getHelpers(o,"fold"),t=0;t<e.length;t++){var r=e[t](n,o);if(r)return r}});var t={rangeFinder:c.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function a(n,o,e){if(o&&void 0!==o[e])return o[e];o=n.options.foldOptions;return(o&&void 0!==o[e]?o:t)[e]}c.defineOption("foldOptions",null),c.defineExtension("foldOption",function(n,o){return a(this,n,o)})});
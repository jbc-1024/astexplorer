"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(p){function e(o){return function(c,i){var d=i.line,f=c.getLine(d);for(var e=[],n=0;n<o.length;n++){var r=function(e){for(var n,r=i.ch,t=0;;){var o=r<=0?-1:f.lastIndexOf(e[0],r-1);if(-1==o){if(1==t)break;t=1,r=f.length}else{if(1==t&&o<i.ch)break;if(n=c.getTokenTypeAt(p.Pos(d,o+1)),!/^(comment|string)/.test(n))return{ch:o+1,tokenType:n,pair:e};r=o-1}}}(o[n]);r&&e.push(r)}e.sort(function(e,n){return e.ch-n.ch});for(n=0;n<e.length;n++){var t=function(e){var n,r,t=1,o=c.lastLine(),i=e.ch;e:for(var f=d;f<=o;++f)for(var l=c.getLine(f),u=f==d?i:0;;){var s=l.indexOf(e.pair[0],u),a=l.indexOf(e.pair[1],u);if(s<0&&(s=l.length),a<0&&(a=l.length),(u=Math.min(s,a))==l.length)break;if(c.getTokenTypeAt(p.Pos(f,u+1))==e.tokenType)if(u==s)++t;else if(!--t){n=f,r=u;break e}++u}return null==n||d==n?null:{from:p.Pos(d,i),to:p.Pos(n,r)}}(e[n]);if(t)return t}return null}}p.registerHelper("fold","brace",e([["{","}"],["[","]"]])),p.registerHelper("fold","brace-paren",e([["{","}"],["[","]"],["(",")"]])),p.registerHelper("fold","import",function(i,e){function n(e){if(e<i.firstLine()||e>i.lastLine())return null;var n=i.getTokenAt(p.Pos(e,1));if("keyword"!=(n=/\S/.test(n.string)?n:i.getTokenAt(p.Pos(e,n.end+1))).type||"import"!=n.string)return null;for(var r=e,t=Math.min(i.lastLine(),e+10);r<=t;++r){var o=i.getLine(r).indexOf(";");if(-1!=o)return{startCh:n.end,end:p.Pos(r,o)}}}var r,e=e.line,t=n(e);if(!t||n(e-1)||(r=n(e-2))&&r.end.line==e-1)return null;for(var o=t.end;;){var f=n(o.line+1);if(null==f)break;o=f.end}return{from:i.clipPos(p.Pos(e,t.startCh+1)),to:o}}),p.registerHelper("fold","include",function(r,e){function n(e){if(e<r.firstLine()||e>r.lastLine())return null;var n=r.getTokenAt(p.Pos(e,1));return"meta"==(n=/\S/.test(n.string)?n:r.getTokenAt(p.Pos(e,n.end+1))).type&&"#include"==n.string.slice(0,8)?n.start+8:void 0}var e=e.line,t=n(e);if(null==t||null!=n(e-1))return null;for(var o=e;;){if(null==n(o+1))break;++o}return{from:p.Pos(e,t+1),to:r.clipPos(p.Pos(o))}})});
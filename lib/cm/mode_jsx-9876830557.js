"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript"],t):t(CodeMirror)}(function(l){function x(t,e,n,r){this.state=t,this.mode=e,this.depth=n,this.prev=r}l.defineMode("jsx",function(s,t){var p=l.getMode(s,{name:"xml",allowMissing:!0,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),u=l.getMode(s,t&&t.base||"javascript");function d(t){var e=t.tagName;t.tagName=null;var n=p.indent(t,"","");return t.tagName=e,n}function f(t,e){return e.context.mode==p?function(t,e,n){if(2==n.depth)return t.match(/^.*?\*\//)?n.depth=1:t.skipToEnd(),"comment";if("{"==t.peek()){p.skipAttribute(n.state);var r=d(n.state),o=n.state.context;if(o&&t.match(/^[^>]*>\s*$/,!1)){for(;o.prev&&!o.startOfLine;)o=o.prev;o.startOfLine?r-=s.indentUnit:n.prev.state.lexical&&(r=n.prev.state.lexical.indented)}else 1==n.depth&&(r+=s.indentUnit);return e.context=new x(l.startState(u,r),u,0,e.context),null}if(1==n.depth){if("<"==t.peek())return p.skipAttribute(n.state),e.context=new x(l.startState(p,d(n.state)),p,0,e.context),null;if(t.match("//"))return t.skipToEnd(),"comment";if(t.match("/*"))return n.depth=2,f(t,e)}var i,a=p.token(t,n.state),c=t.current();/\btag\b/.test(a)?/>$/.test(c)?n.state.context?n.depth=0:e.context=e.context.prev:/^</.test(c)&&(n.depth=1):!a&&-1<(i=c.indexOf("{"))&&t.backUp(c.length-i);return a}(t,e,e.context):function(t,e,n){if("<"==t.peek()&&u.expressionAllowed(t,n.state))return e.context=new x(l.startState(p,u.indent(n.state,"","")),p,0,e.context),u.skipExpression(n.state),null;var r=u.token(t,n.state);if(!r&&null!=n.depth){var o=t.current();"{"==o?n.depth++:"}"==o&&0==--n.depth&&(e.context=e.context.prev)}return r}(t,e,e.context)}return{startState:function(){return{context:new x(l.startState(u),u)}},copyState:function(t){return{context:function t(e){return new x(l.copyState(e.mode,e.state),e.mode,e.depth,e.prev&&t(e.prev))}(t.context)}},token:f,indent:function(t,e,n){return t.context.mode.indent(t.context.state,e,n)},innerMode:function(t){return t.context}}},"xml","javascript"),l.defineMIME("text/jsx","jsx"),l.defineMIME("text/typescript-jsx",{name:"jsx",base:{name:"javascript",typescript:!0}})});
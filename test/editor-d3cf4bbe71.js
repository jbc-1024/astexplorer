"use strict";function _createForOfIteratorHelper(r,t){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=_unsupportedIterableToArray(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var e=0,o=function(){};return{s:o,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(t){function r(r){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}(function(r){throw r}),f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(r)},n:function(){var r=n.next();return a=r.done,r},e:function(t){function r(r){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}(function(r){l=!0,i=r}),f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _unsupportedIterableToArray(r,t){if(r){if("string"==typeof r)return _arrayLikeToArray(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(r,t):void 0}}function _arrayLikeToArray(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}var _globalEditor=null,globalEditorGet=function(){return _globalEditor},globalEditorSet=function(r){_globalEditor=r},setupEditor=function(){var r=e("#editor"),o=CodeMirror(r,{lineNumbers:!0,indentUnit:4,styleActiveLine:!0,matchBrackets:!0,lineWrapping:!0});globalEditorSet(o),o.on("cursorActivity",function(r){var t=o.getCursor(),n=t.line+1,e=t.ch+1;highlightNode([n,e])}),o.on("change",function(r){refresh()}),setNewLang("CSS")},openParent=function r(t){if(t&&t.classList){if(t.classList.contains("openable")){var n=Object.values(t.children),e=n.find(function(r){return r.classList.contains("detailed")}),o=n.find(function(r){return r.classList.contains("undetailed")});e.classList.remove("hide"),o.classList.add("hide"),t.parentNode.children[0].classList.add("open")}r(t.parentNode)}},tokensHasCursor=function(r,t){for(var n=0;n<r.length;n++){var e=r[n];if(e.loc={start:e.start,end:e.end},cursorInNode(e,t))return[!0,e,[n]]}return[!1,null,[]]},highlightNode=function(r){var t=[],n=activeModeName();if("tree"==n){var o=globalAstGet();t=astHasCursor(o,r)[2]}else if("tokens"==n){var i=globalTokensGet();t=tokensHasCursor(i,r)[2]}var a=e("[data-indice='".concat(t.join("."),"']"));if(a&&a.parentNode){var l=a.querySelectorAll(".openable")[0];openParent(l),removeClassAll("highlight"),a.classList.add("highlight"),a.scrollIntoView()}},contains=function r(t,n){if(null==n)return!1;if(isDict(t)){if(t===n)return!0;for(var e=0,o=Object.keys(t);e<o.length;e++){if(r(t[o[e]],n))return!0}return!1}if(isArray(t)){if(t===n)return!0;var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){if(r(i.value,n))return!0}}catch(r){a.e(r)}finally{a.f()}return!1}return t===n},astHasCursor=function r(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(isDict(t)){if(!isNode(t))return[!1,null,u];if(!cursorInNode(t,n))return[!1,null,u];for(var o=0,i=Object.keys(t);o<i.length;o++){var a=i[o],l=t[a],u=e;if(isString(l)||(u=u.concat([a])),(s=r(l,n,u))[0])return s}return[!0,t,u]}if(isArray(t)){for(var c=0;c<t.length;c++){var s;if((s=r(t[c],n,u=e.concat([c])))[0])return s}return[!1,null,u]}return[!1,null,u]},cursorInNode=function(r,t){var n=t[0],e=t[1],o=r.loc.start,i=r.loc.end,a=!1;n>o.line?a=!0:n===o.line&&e>=o.column&&(a=!0);var l=!1;return n<i.line?l=!0:n===i.line&&e<=i.column&&(l=!0),a&&l},preventDefaultSave=function(){document.addEventListener("keydown",function(r){var t=r.metaKey,n="s"===r.key;t&&n&&r.preventDefault()})};